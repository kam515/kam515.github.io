{
  "hash": "a949fca9cdb12c959df845206ac577c0",
  "result": {
    "markdown": "---\ntitle: \"`fuzzywuzzy`\"\nformat:\n  revealjs:\n    output-file: dsan5400_presentation\n    theme: sky\n    incremental: true \nembed-resources: true\ncode-link: true\nexecute:\n  echo: true\n  freeze: auto\n---\n\n## Fuzzy Wuzzy was a bear...\n\n- fuzzy wuzzy had no hair\n- fuzzy wuzzy wasn't really fuzzy\n- was he?\n\n::: {.cell execution_count=1}\n\n::: {.cell-output .cell-output-display}\n```{=html}\n<div style='text-align: center;'>\n```\n:::\n\n::: {.cell-output .cell-output-display}\n![](dsan5400_presentation_files/figure-revealjs/cell-2-output-2.png){width=600 height=389}\n:::\n\n::: {.cell-output .cell-output-display}\n```{=html}\n</div>\n```\n:::\n:::\n\n\n## Access Presentation\n\n::: {.cell execution_count=2}\n\n::: {.cell-output .cell-output-display}\n```{=html}\n<div style='text-align: center;'>\n```\n:::\n\n::: {.cell-output .cell-output-display}\n![](dsan5400_presentation_files/figure-revealjs/cell-3-output-2.png){width=384 height=389}\n:::\n\n::: {.cell-output .cell-output-display}\n```{=html}\n</div>\n```\n:::\n:::\n\n\n## Data cleaning challenge\n\n- We cannot prevent all inconsistencies across human beings who enter data\n\n- Inconsistent data entry isn't always predictable\n\n## Challenge: two databases\n\n</br>\n\n- #### Database 1: (the source of truth)\n\n|          |          |          |          |\n|----------|----------|----------|----------|\n| School Name   | Dept. of Ed. ID Number   | City   | State   |\n\n</br>\n</br>\n\n- #### Database 2: In yearly reports submitted by banks (over 1300 schools) \n\n|          |          |          |          |\n|----------|----------|----------|----------|\n| School Name   | Dept. of Ed. ID Number   | City   | State   |\n\n</br>\n\n...and lots of other information\n\n## Common Errors Included...\n\n- East Charter HS vs. East Charter High School\n- Overton Academy vs. Overton\n- Jackson High School vs. Robert Jackson High School\n- and many more combinations and possible errors\n\n## Solution: `fuzzywuzzy` Python package!\n\n- `pip install fuzzywuzzy`\n- Quantifies the similarity between strings\n\nMy approach:\n\n- For entries without a clear match, I filtered for the same city and state\n- Made matches with a fuzz ratio greater than 0.9\n\n## `fuzzywuzzy` Options {.smaller}\n\n1. **Ratio (Simple Ratio)** \n`fuzz.ratio(\"Humpty Dumpty sat on a wall\", \"Humpty Dumpty Sat on a Wall!\")` >>> 91\n2. **Partial Ratio** \n`fuzz.partial_ratio(\"Humpty Dumpty sat on a wall\", \"Humpty\")` >>> 100\n3. **Token Set Ratio** \n`fuzz.token_set_ratio(\"Humpty Dumpty sat on a wall\", \"Humpty Humpty Dumpty sat on a wall\")` >>> 100\n4. **Token Sort Ratio**\n`fuzz.token_sort_ratio(\"Humpty Dumpty sat on a wall\",\"Dumpty Humpty wall on sat a\")` >>> 100\n\nSource: [Jash Data Sciences](https://www.jashds.com/blog/2019/05/13/fuzzy-stringmatching-python)\n\n## Sample Code\n\n::: {.cell execution_count=3}\n``` {.python .cell-code}\n!pip install fuzzywuzzy\nfrom fuzzywuzzy import fuzz\n\n# Two strings to compare\nstr1 = \"Humpty\"\nstr2 = \"Humpty!\"\n\n# Calculate fuzz ratio\nsimple_ratio = fuzz.ratio(str1, str2)\nprint(f\"The fuzz ratio is {simple_ratio}\")\npartial_ratio = fuzz.partial_ratio(str1, str2)\nprint(f\"The fuzz partial ratio is {partial_ratio}\")\ntoken_set_ratio = fuzz.token_set_ratio(str1, str2)\nprint(f\"The fuzz token set ratio is {token_set_ratio}\")\ntoken_sort_ratio = fuzz.token_sort_ratio(str1, str2)\nprint(f\"The fuzz token sort ratio is {token_sort_ratio}\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRequirement already satisfied: fuzzywuzzy in /opt/anaconda3/lib/python3.9/site-packages (0.18.0)\r\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\nThe fuzz ratio is 92\nThe fuzz partial ratio is 100\nThe fuzz token set ratio is 100\nThe fuzz token sort ratio is 100\n```\n:::\n:::\n\n\n## Math Foundation {.smaller}\n\nThe **Levenshtein Distance** represents the least number of edit operations that are necessary to modify one string to obtain another string\n\n</br>\n\n### Examples:\n| String1 | String2    | Levenshtein Distance | Fuzz Ratio |\n| ------- | ---------- | -------------------- | ---------- |\n| CAT     | PAT        | 1                    | 67         |\n| DOG     | FOG        | 1                    | 67         |\n| APPLE   | APPEAL     | 2                    | 77         |\n| PYTHON  | JAVASCRIPT | 7                    | 44         |\n| CAR     | CARROT     | 3                    | 50         |\n\n## Comparison of Fuzz Ratios\n\n::: {.cell execution_count=4}\n\n::: {.cell-output .cell-output-display}\n```{=html}\n<div style='text-align: center;'>\n```\n:::\n\n::: {.cell-output .cell-output-display}\n![](dsan5400_presentation_files/figure-revealjs/cell-5-output-2.png){width=763 height=572}\n:::\n\n::: {.cell-output .cell-output-display}\n```{=html}\n</div>\n```\n:::\n:::\n\n\n## References / Helpful Resources\n\n- [Fuzzywuzzy Documentation](https://pypi.org/project/fuzzywuzzy/)\n- [Levenshtein distance for beginners-Medium article](https://medium.com/@ethannam/understanding-the-levenshtein-distance-equation-for-beginners-c4285a5604f0)\n\nAccess presentation:\n\n::: {.cell execution_count=5}\n\n::: {.cell-output .cell-output-display}\n```{=html}\n<div style='text-align: center;'>\n```\n:::\n\n::: {.cell-output .cell-output-display}\n![](dsan5400_presentation_files/figure-revealjs/cell-6-output-2.png){width=384 height=389}\n:::\n\n::: {.cell-output .cell-output-display}\n```{=html}\n</div>\n```\n:::\n:::\n\n\n",
    "supporting": [
      "dsan5400_presentation_files"
    ],
    "filters": [],
    "includes": {
      "include-in-header": [
        "<script src=\"https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js\" integrity=\"sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==\" crossorigin=\"anonymous\"></script>\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js\" integrity=\"sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==\" crossorigin=\"anonymous\"></script>\n<script type=\"application/javascript\">define('jquery', [],function() {return window.jQuery;})</script>\n"
      ]
    }
  }
}